<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="description" content="" />
    <meta name="author" content="" />
    <title>Kanker Paru-paru: Pemeriksaan Mandiri</title>
    <!-- CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

    <link
      href="{{ url_for('static', filename='css/style.css') }}"
      rel="stylesheet"
    />
    <!-- FONT -->
    <link href="https://fonts.gstatic.com" rel="preconnect" />
    <link
      href="https://fonts.googleapis.com/css2?family=Josefin+Sans:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;1,200;1,300;1,400;1,500;1,600&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    <!-- CONTAINER -->
    <div class="container d-flex align-items-center min-vh-100">
      <div class="row g-0 justify-content-center">
        <!-- TITLE -->
        <div class="col-lg-4 offset-lg-1 mx-0 px-0">
          <div id="title-container">
            <img
              class="covid-image"
              src="{{ url_for('static', filename='img/lung.jpg') }}"
              style="
                border: 1px solid #ddd;
                border-radius: 10px;
                width: 60%;
                height: auto;
              "
            />
            <h2>KANKER PARU-PARU</h2>
            <h3>Pemeriksaan Mandiri</h3>
            <p>
              Form ini bisa bantu kamu mengecek gejala atau faktor risiko yang
              mungkin berkaitan dengan kanker paru-paru. Yuk isi
              langkah-langkahnya, supaya tahu kapan sebaiknya periksa ke dokter.
            </p>
          </div>
        </div>
        <!-- FORMS -->
        <div class="col-lg-7 mx-0 px-0">
          <div class="progress">
            <div
              aria-valuemax="100"
              aria-valuemin="0"
              aria-valuenow="50"
              class="progress-bar progress-bar-striped progress-bar-animated bg-danger"
              role="progressbar"
              style="width: 0%"
            ></div>
          </div>
          <div id="qbox-container">
            <form
              class="needs-validation"
              id="form-wrapper"
              action="/"
              method="POST"
              name="form-wrapper"
              novalidate
            >
              <div id="steps-container">
                <!-- 1. AGE -->
                <div class="step">
                  <h4>Boleh tahu usia kamu sekarang berapa tahun?</h4>
                  <div class="mt-1">
                    <label class="form-label">Umur:</label>
                    <input
                      class="form-control"
                      id="age"
                      name="Age"
                      type="number"
                      min="0"
                      required
                    />
                  </div>
                </div>

                <!-- 2. GENDER -->
                <div class="step">
                  <h4>Kamu laki-laki atau perempuan?</h4>
                  <div class="form-check ps-0 q-box">
                    <div class="q-box__question">
                      <input
                        class="form-check-input question__input"
                        id="gender_m"
                        name="Gender"
                        type="radio"
                        value="1"
                      />
                      <label
                        class="form-check-label question__label"
                        for="gender_m"
                        >Laki-laki</label
                      >
                    </div>
                    <div class="q-box__question">
                      <input
                        class="form-check-input question__input"
                        id="gender_f"
                        name="Gender"
                        type="radio"
                        value="0"
                      />
                      <label
                        class="form-check-label question__label"
                        for="gender_f"
                        >Perempuan</label
                      >
                    </div>
                  </div>
                </div>

                <!-- 3. AIR POLLUTION -->
                <div class="step">
                  <h4>Seberapa sering kamu terpapar polusi udara (0-10)?</h4>
                  <div class="mt-1">
                    <label class="form-label">Polusi Udara:</label>
                    <input
                      class="form-control"
                      id="airpollution"
                      name="Air_Pollution"
                      type="number"
                      min="0"
                      max="10"
                    />
                  </div>
                </div>

                <!-- 4. OBESITY -->
                <div class="step">
                  <h4>Apakah kamu mengalami obesitas?</h4>
                  <div class="form-check ps-0 q-box">
                    <div class="q-box__question">
                      <input
                        class="form-check-input question__input"
                        type="radio"
                        name="Obesity"
                        id="obesity-yes"
                        value="1"
                      />
                      <label
                        class="form-check-label question__label"
                        for="obesity-yes"
                      >
                        Ya
                      </label>
                    </div>
                    <div class="q-box__question">
                      <input
                        class="form-check-input question__input"
                        type="radio"
                        name="Obesity"
                        id="obesity-no"
                        value="0"
                      />
                      <label
                        class="form-check-label question__label"
                        for="obesity-no"
                      >
                        Tidak
                      </label>
                    </div>
                  </div>
                </div>

                <!-- 5. PASSIVE SMOKER -->
                <div class="step">
                  <h4>
                    Apakah kamu sering terpapar asap rokok dari orang lain?
                  </h4>
                  <div class="form-check ps-0 q-box">
                    <div class="q-box__question">
                      <input
                        class="form-check-input question__input"
                        name="Passive_Smoker"
                        id="passive_yes"
                        type="radio"
                        value="1"
                      />
                      <label
                        class="form-check-label question__label"
                        for="passive_yes"
                        >Ya</label
                      >
                    </div>
                    <div class="q-box__question">
                      <input
                        class="form-check-input question__input"
                        name="Passive_Smoker"
                        id="passive_no"
                        type="radio"
                        value="0"
                      />
                      <label
                        class="form-check-label question__label"
                        for="passive_no"
                        >Tidak</label
                      >
                    </div>
                  </div>
                </div>

                <!-- 6. FATIGUE -->
                <div class="step">
                  <h4>Apakah kamu sering merasa kelelahan?</h4>
                  <div class="form-check ps-0 q-box">
                    <div class="q-box__question">
                      <input
                        class="form-check-input question__input"
                        name="Fatigue"
                        id="fatigue_yes"
                        type="radio"
                        value="1"
                      />
                      <label
                        class="form-check-label question__label"
                        for="fatigue_yes"
                        >Ya</label
                      >
                    </div>
                    <div class="q-box__question">
                      <input
                        class="form-check-input question__input"
                        name="Fatigue"
                        id="fatigue_no"
                        type="radio"
                        value="0"
                      />
                      <label
                        class="form-check-label question__label"
                        for="fatigue_no"
                        >Tidak</label
                      >
                    </div>
                  </div>
                </div>

                <!-- 7. WEIGHT LOSS -->
                <div class="step">
                  <h4>
                    Apakah kamu mengalami penurunan berat badan tanpa sebab?
                  </h4>
                  <div class="form-check ps-0 q-box">
                    <div class="q-box__question">
                      <input
                        class="form-check-input question__input"
                        name="Weight_Loss"
                        id="weight_yes"
                        type="radio"
                        value="1"
                      />
                      <label
                        class="form-check-label question__label"
                        for="weight_yes"
                        >Ya</label
                      >
                    </div>
                    <div class="q-box__question">
                      <input
                        class="form-check-input question__input"
                        name="Weight_Loss"
                        id="weight_no"
                        type="radio"
                        value="0"
                      />
                      <label
                        class="form-check-label question__label"
                        for="weight_no"
                        >Tidak</label
                      >
                    </div>
                  </div>
                </div>

                <!-- 8. WHEEZING -->
                <div class="step">
                  <h4>
                    Apakah kamu sering mengalami mengi (bunyi napas berbunyi)?
                  </h4>
                  <div class="form-check ps-0 q-box">
                    <div class="q-box__question">
                      <input
                        class="form-check-input question__input"
                        name="Wheezing"
                        id="wheezing_yes"
                        type="radio"
                        value="1"
                      />
                      <label
                        class="form-check-label question__label"
                        for="wheezing_yes"
                        >Ya</label
                      >
                    </div>
                    <div class="q-box__question">
                      <input
                        class="form-check-input question__input"
                        name="Wheezing"
                        id="wheezing_no"
                        type="radio"
                        value="0"
                      />
                      <label
                        class="form-check-label question__label"
                        for="wheezing_no"
                        >Tidak</label
                      >
                    </div>
                  </div>
                </div>

                <!-- 9. SWALLOWING DIFFICULTY -->
                <div class="step">
                  <h4>Apakah kamu mengalami kesulitan saat menelan?</h4>
                  <div class="form-check ps-0 q-box">
                    <div class="q-box__question">
                      <input
                        class="form-check-input question__input"
                        name="Swallowing_Difficulty"
                        id="swallowing_yes"
                        type="radio"
                        value="1"
                      />
                      <label
                        class="form-check-label question__label"
                        for="swallowing_yes"
                        >Ya</label
                      >
                    </div>
                    <div class="q-box__question">
                      <input
                        class="form-check-input question__input"
                        name="Swallowing_Difficulty"
                        id="swallowing_no"
                        type="radio"
                        value="0"
                      />
                      <label
                        class="form-check-label question__label"
                        for="swallowing_no"
                        >Tidak</label
                      >
                    </div>
                  </div>
                </div>

                <!-- 10. CLUBBING OF FINGER NAILS -->
                <div class="step">
                  <h4>
                    Apakah ujung jari kamu menebal atau membulat (Clubbing of
                    Finger Nails)?
                  </h4>
                  <div class="form-check ps-0 q-box">
                    <div class="q-box__question">
                      <input
                        class="form-check-input question__input"
                        name="Clubbing_of_Finger_Nails"
                        id="clubbing_yes"
                        type="radio"
                        value="1"
                      />
                      <label
                        class="form-check-label question__label"
                        for="clubbing_yes"
                        >Ya</label
                      >
                    </div>
                    <div class="q-box__question">
                      <input
                        class="form-check-input question__input"
                        name="Clubbing_of_Finger_Nails"
                        id="clubbing_no"
                        type="radio"
                        value="0"
                      />
                      <label
                        class="form-check-label question__label"
                        for="clubbing_no"
                        >Tidak</label
                      >
                    </div>
                  </div>
                </div>
              </div>

              <div id="q-box__buttons">
                <button id="prev-btn" type="button">Previous</button>
                <button id="next-btn" type="button">Next</button>
                <button id="submit-btn" type="submit">Submit</button>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
    <!-- PRELOADER -->
    <div id="preloader-wrapper">
      <div id="preloader"></div>
      <div class="preloader-section section-left"></div>
      <div class="preloader-section section-right"></div>
    </div>

    {% if prediction != -1 %}
    <script>
      document.addEventListener('DOMContentLoaded', function () {
        let icon = 'info';
        let title = '';
        let html = '';
        let confirmColor = '#3085d6';

        {% if prediction == 0 %}
        // LOW
        icon = 'success';
        title = 'Risiko Rendah';
        html = `
          <strong>Hasil menunjukkan risiko rendah terhadap kanker paru-paru.</strong><br>
          Tetap jaga pola hidup sehat dan lakukan pemeriksaan rutin untuk pencegahan.
        `;
        confirmColor = '#28a745'; // hijau

        {% elif prediction == 1 %}
        // MEDIUM
        icon = 'warning';
        title = 'Risiko Sedang';
        html = `
          <strong>Hasil menunjukkan indikasi risiko sedang terhadap kanker paru-paru.</strong><br>
          Disarankan untuk segera berkonsultasi dengan tenaga medis agar mendapatkan saran lebih lanjut.
        `;
        confirmColor = '#d39e00'; // kuning

        {% elif prediction == 2 %}
        // HIGH
        icon = 'error';
        title = 'Risiko Tinggi';
        html = `
          <strong>Hasil menunjukkan indikasi risiko tinggi terhadap kanker paru-paru.</strong><br>
          <br>
          Segera konsultasikan ke tenaga medis profesional untuk pemeriksaan lebih lanjut.
        `;
        confirmColor = '#dc3545'; // merah

        {% else %}
        // ERROR / UNDEFINED
        icon = 'error';
        title = '❌ Gagal Memproses';
        html = `
          Maaf, terjadi kesalahan saat memproses data kamu.<br>
          Silakan coba lagi dalam beberapa saat.
        `;
        confirmColor = '#6c757d'; // abu-abu
        {% endif %}

        Swal.fire({
          icon: icon,
          title: title,
          html: html,
          width: 600,
          confirmButtonText: 'Tutup',
          confirmButtonColor: confirmColor
        }).then(() => {
          window.location.href = '/';
        });
      });
    </script>
    {% endif %}

    <script src="{{ url_for('static', filename='js/script.js') }}"></script>
  </body>
</html>
